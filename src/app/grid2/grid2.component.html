<div>
  <svg
    (pointerdown)="downHandleGrid($event)"
    (pointerup)="upHandleGrid($event)"
    (pointermove)="moveHandleGrid($event)"
    (wheel)="wheelHandleGrid($event)"
    (click)="clickHandleGrid($event)"
     width="501"
     height="501"
     viewBox="0 0 501 501"
     #svgGrid>

    <defs>
      <pattern id="smallGrid" width="10" height="10" patternUnits="userSpaceOnUse">
        <path d="M 10 0 L 0 0 0 10" fill="none" stroke="gray" stroke-width="0.5"/>
      </pattern>
      <pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse">
        <rect width="100" height="100" fill="url(#smallGrid)"/>
        <path d="M 100 0 L 0 0 0 100" fill="none" stroke="gray" stroke-width="1"/>
      </pattern>
    </defs>
    <rect width="501" height="501" fill="url(#grid)" />

    <!--  -->
    <defs>
      <filter id="shadow">
        <feDropShadow dx="3" dy="3" stdDeviation="0" flood-color="rgba(0, 0, 0, .5)" flood-opacity="0.5"/>
      </filter>
      <filter id="liftedShadow">
        <feDropShadow dx="4" dy="4" stdDeviation="0" flood-color="rgba(0, 0, 0, .5)" flood-opacity="0.7"/>
      </filter>
    </defs>
    <g *ngFor="let svgLayer of svgLayers" #svgLayerGroup>
      <rect
        (pointerdown)="downHandleSVGLayer($event, svgLayer)"
        (click)="clickHandleSVGLayer($event, svgLayer)"
        attr.id="{{svgLayer.id}}"
        attr.x="{{ svgLayer.positionX - svgLayer.width / 2 }}"
        attr.y="{{ svgLayer.positionY - svgLayer.height / 2 }}"
        attr.width="{{ svgLayer.width }}"
        attr.height="{{ svgLayer.height }}"
        attr.rx="{{ svgLayer.rx }}"
        attr.ry="{{ svgLayer.ry }}"
        stroke="black"
        stroke-width="0.1"
        attr.fill="{{ svgLayer.color }}"
        attr.filter="{{ svgLayer.shadowFilter }}"
        [ngClass]="rectClass">
      </rect>

      <!-- leftside of rect -->
      <circle
        attr.cx="{{ svgLayer.positionX - svgLayer.width / 2 }}"
        attr.cy="{{ svgLayer.positionY }}"
        r="10"
        stroke="black"
        stroke-width="1.0"
        fill="white">
      </circle>

      <!-- Rightside of rect -->
      <circle
        attr.cx="{{ svgLayer.positionX + svgLayer.width / 2 }}"
        attr.cy="{{ svgLayer.positionY }}"
        r="10"
        stroke="black"
        stroke-width="1.0"
        fill="white">
      </circle>

    </g>
    <!--  -->

  </svg>
</div>

<br>
<br>
<br>

<div>
  <button mat-raised-button (click)="addSvgLayers()" color="warn">Add</button>
  <button mat-raised-button (click)="move()" color="primary">Move</button>
</div>

<br>
<br>
<br>

<!-- <svg viewBox="0 0 200 200">
  <defs>
    <filter id="feDropShadow">
      <feDropShadow/>
    </filter>
    <filter id="feDropShadow1">
      <feDropShadow dx="3" dy="3" stdDeviation="0" flood-color="blue" flood-opacity="0.5"/>
    </filter>
  </defs>
  <g fill="rgba(255,0,0,0.5)" stroke="orange" stroke-width="8">
    <circle filter="url(#feDropShadow)" cx="50" cy="50" r="40"/>
    <circle filter="url(#feDropShadow1)" cx="150" cy="150" r="40"/>
  </g>
</svg> -->
